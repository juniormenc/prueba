<div class="main-content">
    <div class="container-fluid">
        <div class="col-md-12">
            <div class="card panel panel-azul">
                <div class="panel-heading">
                    Reporte de Historias Clínicas
                </div>

                <div class="content table-responsive table-full-width panel-body">
              
                    <div class="form-group col-md-12" align="right">
                        <input type="text" class="buscar" (keyup)="filtro($event.target.value)" placeholder="Buscar Paciente">
                    </div>
                  
                    <div class="loading col-md-12" *ngIf="loading" align="center">
                        <img src="../../../../assets/img/loader.gif" />
                    </div>
                             
                    <table class="table col-md-12" *ngIf="e_pacientes">
                        <thead>
                            <tr>
                                <th>N° DOC</th>
                                <th>Nombre</th>
                                <th>F.Nacimiento</th>
                                <th>Celular</th>
                                <th>Domicilio</th>
                                <th>Acción</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor = "let pa of e_pacientes">
                                <td>{{pa.doc_ide}}</td>
                                <td>{{pa.apellido_paterno}} {{pa.apellido_materno}}, {{pa.nombres}}</td>
                                <td>{{pa.fecha_nacimiento}}</td>
                                <td>{{pa.celular}}</td>
                                <td>{{pa.domicilio}}</td>
                                <td>
                                    <button class="btn btn-amarillo-icon" (click)="gotoHistorialEpisodios(pa.id, pa.apellido_paterno, pa.apellido_materno, pa.nombres)"><i class="fa fa-arrow-circle-down"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    
          <div class="backdrop" [ngStyle]="{'display':displayE}"></div>
          <!-- /.modal !-->
          <div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':displayE}">
            <!-- /.modal-dialog -->
            <div class="modal-dialog" role="document">
              <!-- /.modal-content -->
              <div class="modal-content modal-contenido">
                <div class="modal-header">
                  <button type="button" class="close" aria-label="Close" (click)="onCloseHandled()"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title">Historial de Citas</h4>
                </div>
                <div class="modal-body">
                  <div>
                      <p style="color:red">{{paciente}}</p>
                    <table class="table col-md-12">
                      <thead>
                        <tr>
                          <th>Fecha</th>
                          <th>Especialidad</th>
                          <th>Médico</th>
                          <th>Visualizar</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor = "let e_c of e_cita">
                          <td>{{e_c.fecha}}</td>
                          <td>{{e_c.especialidad}}</td>
                          <td>{{e_c.medico}}</td>
                          <td>
                            <button type="button" class="btn btn-amarillo-icon" (click)="abrir_mod_pdf(e_c.cita_id, e_c.fecha)" ><i class="fa fa-list"></i></button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-verde" (click)="onCloseHandled()" >Cerrar</button>
                </div>
              </div>
              <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
          </div>
          <!-- /.modal HISTORIAL!-->





          <div class="backdrop" [ngStyle]="{'display':displayHPDF}"></div>
          <!-- /.modal !-->
          <div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':displayHPDF}">
            <!-- /.modal-dialog -->
            <div class="modal-dialog" role="document">
              <!-- /.modal-content -->
              <div class="modal-content modal-contenido">
                <div class="modal-header">
                  <button type="button" class="close" aria-label="Close" (click)="onCloseHandledHPDF()"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title">Historial de Citas</h4>
                </div>
                <div class="modal-body">
                  <div>
                    <div class="loading col-md-12" *ngIf="loading_hc" align="center">
                      <img src="../../../../assets/img/loader.gif" />
                    </div>
    
                    <table class="table col-md-12" *ngIf="e_hc">
                      <thead>
                        <tr>
                          <th>DESCARGAR PDF</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            {{e_cita_fecha}}
                            <button type="button" class="btn btn-rojo-icon" (click)="downloadPDF()" ><i class="fa fa-arrow-down"></i></button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-verde" (click)="onCloseHandledHPDF()" >Cerrar</button>
                </div>
              </div>
              <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
          </div>
          <!-- /.modal DESCARGAR HISTORIA PDF!-->

                </div>
            </div>
        </div>
    </div>
</div>
